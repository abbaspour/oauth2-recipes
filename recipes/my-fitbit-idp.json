{"name":"my-fitbit-idp","strategy":"oauth2","options":{"authorizationURL":"https://www.fitbit.com/oauth2/authorize","tokenURL":"https://api.fitbit.com/oauth2/token","scope":"profile","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n\n  request.get('https://api.fitbit.com/1/user/-/profile.json', {\n      headers: {\n\n        'Authorization': 'Bearer ' + accessToken\n      }\n    }\n\n    ,\n    function(err, r, body) {\n      if (err) {\n        return cb(err);\n      }\n      try {\n        var profile = JSON.parse(body);\n        profile.provider = 'fitbit';\n        profile.id = profile.user.encodedId;\n        profile.displayName = profile.user.displayName;\n        profile.name = profile.user.fullName;\n        cb(null, profile);\n      } catch (e) {\n        cb(e);\n      }\n    });\n\n\n}"}}}